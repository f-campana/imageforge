{
  "reportDate": "2026-02-20",
  "baselineDate": "2026-02-15",
  "baselineSource": "Prior audit snapshot provided in thread (2026-02-15).",
  "generatedAt": "2026-02-20T13:33:27Z",
  "scope": {
    "imageforge": {
      "path": "/Users/fabiencampana/Documents/ImageForge",
      "branch": "main",
      "sha": "c0ecd1ad085f008df4be95804a907b909457f760"
    },
    "imageforgeSite": {
      "path": "/Users/fabiencampana/Documents/imageforge-site",
      "branch": "main",
      "sha": "fdf1dcf91cbfc765fd5e53a0128e9328fc7d544e",
      "analyzedViaArchiveAt": "/Users/fabiencampana/Documents/imageforge-site"
    }
  },
  "verificationRuns": [
    {
      "timestamp": "2026-02-20T14:27:20Z",
      "repo": "imageforge-site",
      "command": "node scripts/security/check-workflow-action-pinning.mjs",
      "status": "pass",
      "note": "6 workflow files passed policy check"
    },
    {
      "timestamp": "2026-02-20T14:26:42Z",
      "repo": "imageforge-site",
      "command": "pnpm run test:e2e",
      "status": "pass",
      "note": "Playwright smoke passed including security-header assertions"
    },
    {
      "timestamp": "2026-02-20T14:26:22Z",
      "repo": "imageforge-site",
      "command": "pnpm run audit:prod:reliable",
      "status": "pass",
      "note": "Primary pnpm audit passed; retry/fallback path active"
    },
    {
      "timestamp": "2026-02-20T14:25:44Z",
      "repo": "imageforge-site",
      "command": "pnpm run check:ci",
      "status": "pass",
      "note": "lint/typecheck/format/build/seo gates passed"
    },
    {
      "timestamp": "2026-02-20T14:27:20Z",
      "repo": "imageforge",
      "command": "node scripts/security/check-workflow-action-pinning.mjs",
      "status": "pass",
      "note": "6 workflow files passed policy check"
    },
    {
      "timestamp": "2026-02-20T14:25:24Z",
      "repo": "imageforge",
      "command": "pnpm run test:e2e",
      "status": "pass",
      "note": "Packaged install + npx flow passed"
    },
    {
      "timestamp": "2026-02-20T14:25:11Z",
      "repo": "imageforge",
      "command": "pnpm run check",
      "status": "pass",
      "note": "typecheck/lint/format/test all passed (100 tests)"
    },
    {
      "timestamp": "2026-02-19T16:07:58Z",
      "repo": "imageforge",
      "command": "pnpm test",
      "status": "pass",
      "note": "89 tests passed"
    },
    {
      "timestamp": "2026-02-19T16:07:58Z",
      "repo": "imageforge",
      "command": "pnpm run test:e2e",
      "status": "pass",
      "note": "Packaged install e2e passed"
    },
    {
      "timestamp": "2026-02-19T16:08:12Z",
      "repo": "imageforge",
      "command": "pnpm run check",
      "status": "fail",
      "note": "format:check failed on 17 docs files"
    },
    {
      "timestamp": "2026-02-19T16:07:23Z",
      "repo": "imageforge",
      "command": "pnpm audit --prod --audit-level=high",
      "status": "pass",
      "note": "No known vulnerabilities found"
    },
    {
      "timestamp": "2026-02-19T16:07:35Z",
      "repo": "imageforge-site",
      "command": "pnpm run check:ci",
      "status": "pass",
      "note": "Full CI-parity gate passed"
    },
    {
      "timestamp": "2026-02-19T16:07:28Z",
      "repo": "imageforge-site",
      "command": "NEXT_PUBLIC_SITE_URL=https://example.com SEO_MODE=advisory pnpm run seo:check",
      "status": "pass",
      "note": "critical=0, high=1, medium=1, score=85"
    },
    {
      "timestamp": "2026-02-19T16:08:21Z",
      "repo": "imageforge-site",
      "command": "pnpm run benchmark:test",
      "status": "pass",
      "note": "1 benchmark test passed"
    },
    {
      "timestamp": "2026-02-19T16:08:28Z",
      "repo": "imageforge-site",
      "command": "pnpm run animation:check",
      "status": "pass",
      "note": "Canonical + fixture animation safety passed"
    },
    {
      "timestamp": "2026-02-19T16:05:23Z",
      "repo": "imageforge-site",
      "command": "pnpm audit --prod --audit-level=high",
      "status": "fail",
      "note": "npm audit endpoint 500 (ERR_PNPM_AUDIT_BAD_RESPONSE)"
    },
    {
      "timestamp": "2026-02-19T23:37:44Z",
      "repo": "imageforge-site",
      "command": "GitHub Actions: animation-safety",
      "status": "pass",
      "note": "PR #28 required safety gate passed"
    },
    {
      "timestamp": "2026-02-19T23:37:57Z",
      "repo": "imageforge-site",
      "command": "GitHub Actions: quality-gates-advisory",
      "status": "pass",
      "note": "Advisory unit/e2e/visual/lhci stack executed with artifacts"
    }
  ],
  "deltaCounts": {
    "New": 4,
    "Changed": 4,
    "Unchanged": 7,
    "Resolved": 18
  },
  "findings": [
    {
      "id": "IF-CLI-SEC-001",
      "repo": "imageforge",
      "domain": "Module System",
      "severity": "Critical",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 2: package is now ESM-primary with explicit dual import/require export conditions and dual build outputs.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/package.json",
          "line": 15,
          "note": "package now declares type module"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/package.json",
          "line": 22,
          "note": "exports define both import and require conditions"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tsconfig.json",
          "line": 4,
          "note": "ESM-primary NodeNext compilation"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/imageforge.test.ts",
          "line": 1785,
          "note": "local consumer require/import export matrix coverage"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/packaged-install.e2e.test.ts",
          "line": 96,
          "note": "tarball consumer require/import matrix coverage"
        }
      ],
      "impact": "Consumer module loading contract is now explicit and verified across ESM and CJS entry points.",
      "recommendation": "Keep dual build/export matrix in CI and preserve import/require compatibility tests for future dependency upgrades.",
      "owner": "CLI Core",
      "verification": [
        "pnpm run check",
        "pnpm run test:e2e",
        "node -e \"require('@imageforge/cli')\"",
        "node --input-type=module -e \"import '@imageforge/cli'\""
      ]
    },
    {
      "id": "IF-CLI-MAINT-002",
      "repo": "imageforge",
      "domain": "Runtime Policy",
      "severity": "Medium",
      "deltaStatus": "Unchanged",
      "finding": "Engine policy remains Node >=22.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/package.json",
          "line": 94,
          "note": "engines.node >=22"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/README.md",
          "line": 55,
          "note": "runtime requirement in docs"
        }
      ],
      "impact": "Compatibility footprint is narrower than necessary for many users.",
      "recommendation": "Re-evaluate minimum Node support and expand CI matrix if policy changes.",
      "owner": "CLI Core",
      "verification": ["Matrix CI run on 20/22/24 (if policy updated)"]
    },
    {
      "id": "IF-CLI-DX-003",
      "repo": "imageforge",
      "domain": "Public API / DX",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 2: stable runner API is now exported on @imageforge/cli/runner (subpath-only contract).",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/package.json",
          "line": 33,
          "note": "runner subpath export includes types/import/require"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 684,
          "note": "runImageforge public function"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/imageforge.test.ts",
          "line": 1785,
          "note": "asserts runner is available on subpath and absent from root"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/packaged-install.e2e.test.ts",
          "line": 99,
          "note": "verifies runner subpath in installed tarball"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/README.md",
          "line": 268,
          "note": "documents stable subpath runner API for ESM/CJS"
        }
      ],
      "impact": "Programmatic consumers can call the full pipeline runner directly without shelling out to the CLI.",
      "recommendation": "Maintain SemVer stability for @imageforge/cli/runner and keep root API intentionally runner-free.",
      "owner": "CLI Core",
      "verification": [
        "pnpm run check",
        "pnpm run test:e2e",
        "node -e \"require('@imageforge/cli/runner')\"",
        "node --input-type=module -e \"import '@imageforge/cli/runner'\""
      ]
    },
    {
      "id": "IF-CLI-DX-004",
      "repo": "imageforge",
      "domain": "CLI UX",
      "severity": "Medium",
      "deltaStatus": "Unchanged",
      "finding": "Key DX ergonomics remain missing: dry-run, include/exclude globs, init scaffold.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/cli.ts",
          "line": 340,
          "note": "current option set"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/config.ts",
          "line": 29,
          "note": "config keys do not include include/exclude patterns"
        }
      ],
      "impact": "Harder adoption and selective processing in mixed repos.",
      "recommendation": "Add staged DX enhancements for previewing and filtering work.",
      "owner": "CLI Product",
      "verification": ["CLI integration tests for new flags/commands"]
    },
    {
      "id": "IF-CLI-PROD-005",
      "repo": "imageforge",
      "domain": "Feature Scope",
      "severity": "Medium",
      "deltaStatus": "Unchanged",
      "finding": "Input discovery still excludes webp/avif/svg source files.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/processor.ts",
          "line": 48,
          "note": "IMAGE_EXTENSIONS set"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/README.md",
          "line": 275,
          "note": "documented supported source extensions"
        }
      ],
      "impact": "Migration friction for teams already using modern source formats.",
      "recommendation": "Add support or publish explicit roadmap/limitation guidance.",
      "owner": "CLI Product",
      "verification": ["Discovery and processing tests for any newly supported formats"]
    },
    {
      "id": "IF-CLI-MAINT-006",
      "repo": "imageforge",
      "domain": "Maintainability",
      "severity": "Medium",
      "deltaStatus": "Unchanged",
      "finding": "Core implementation and tests remain monolithic.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 1114,
          "note": "file length"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/imageforge.test.ts",
          "line": 1819,
          "note": "file length"
        }
      ],
      "impact": "Higher change risk and slower debugging/refactoring.",
      "recommendation": "Split by responsibility (cache/preflight/report/tests by module).",
      "owner": "CLI Core",
      "verification": ["Refactor with unchanged behavioral snapshots and full test pass"]
    },
    {
      "id": "IF-CLI-TEST-007",
      "repo": "imageforge",
      "domain": "Validation Depth",
      "severity": "Medium",
      "deltaStatus": "Changed",
      "finding": "Test surface expanded, but runner internals still lack direct edge-case unit coverage.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/benchmark-tools.test.ts",
          "line": 128,
          "note": "new benchmark test coverage exists"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 387,
          "note": "saveCacheAtomic failure path"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/imageforge.test.ts",
          "line": 508,
          "note": "orientation happy path only"
        }
      ],
      "impact": "Critical failure paths can still regress silently.",
      "recommendation": "Add focused unit tests for cache atomicity, preflight corrupt images with widths, and invalid orientation values.",
      "owner": "CLI QA",
      "verification": ["pnpm test with new targeted test cases"]
    },
    {
      "id": "IF-CLI-TEST-008",
      "repo": "imageforge",
      "domain": "E2E Coverage",
      "severity": "Low",
      "deltaStatus": "Changed",
      "finding": "npx execution is now tested, but only after tarball install in a consumer project.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/packaged-install.e2e.test.ts",
          "line": 74,
          "note": "npx imageforge tested after npm install tarball"
        }
      ],
      "impact": "Direct one-shot npx package resolution remains untested.",
      "recommendation": "Add isolated remote-style npx scenario without pre-install.",
      "owner": "CLI QA",
      "verification": ["Extended e2e test case for direct package execution"]
    },
    {
      "id": "IF-CLI-SEC-009",
      "repo": "imageforge",
      "domain": "Output Safety",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: terminal-facing file path and error output now sanitize control characters before rendering.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 146,
          "note": "sanitizeForTerminal utility added for user-facing output"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 910,
          "note": "relative path logging now uses sanitized value"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/imageforge.test.ts",
          "line": 1355,
          "note": "regression test validates escaped control characters in --check output"
        }
      ],
      "impact": "Crafted filenames can no longer inject raw ANSI/control sequences into CLI output streams.",
      "recommendation": "Keep sanitization on all user-facing logs and preserve regression tests for escaped output behavior.",
      "owner": "CLI Security",
      "verification": [
        "pnpm run check",
        "vitest: --check sanitizes control characters in logged file paths"
      ]
    },
    {
      "id": "IF-CLI-SEC-010",
      "repo": "imageforge",
      "domain": "Resource Safety",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: file hashing moved from full-buffer readFileSync to chunked sync reads with constant memory footprint.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/processor.ts",
          "line": 47,
          "note": "fixed-size hash chunk constant"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/processor.ts",
          "line": 113,
          "note": "chunked hashing loop in fileHash"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/imageforge.test.ts",
          "line": 398,
          "note": "large-file hash regression test"
        }
      ],
      "impact": "Large-file hashing no longer requires loading the entire file in memory before digesting.",
      "recommendation": "Retain chunked hash implementation and keep large-file regression test coverage.",
      "owner": "CLI Core",
      "verification": ["pnpm run check", "vitest: hashes large files correctly with chunked reads"]
    },
    {
      "id": "IF-CLI-BENCH-011",
      "repo": "imageforge",
      "domain": "Benchmark Integrity",
      "severity": "High",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 1: enabled benchmark sources are pinned and source fetch is fail-closed by default.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/dataset-sources.json",
          "line": 12,
          "note": "enabled sources now carry pinned sha256 values"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/fetch-sources.mjs",
          "line": 58,
          "note": "strict defaults with explicit waiver flags"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/fetch-sources.mjs",
          "line": 139,
          "note": "missing/invalid sha256 fails unless waiver enabled"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/fetch-sources.mjs",
          "line": 228,
          "note": "non-partial runs exit nonzero on failures"
        }
      ],
      "impact": "Open-license source provenance and availability are now enforced by default during dataset fetch.",
      "recommendation": "Keep source hashes pinned and use waiver flags only for controlled recovery scenarios.",
      "owner": "CLI Benchmark",
      "verification": [
        "pnpm run bench:dataset:fetch -- --sources-file <fixture-with-missing-sha> --out-dir <tmp> (expects exit 1)",
        "pnpm test"
      ]
    },
    {
      "id": "IF-CLI-BENCH-012",
      "repo": "imageforge",
      "domain": "Benchmark Governance",
      "severity": "High",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 1: dataset release flow enforces immutable tags and create-only publishing.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.github/workflows/benchmark-dataset-release.yml",
          "line": 50,
          "note": "preflight asserts tag absence before release"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.github/workflows/benchmark-dataset-release.yml",
          "line": 89,
          "note": "release uses create-only path (no --clobber)"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/assert-dataset-tag-absent.mjs",
          "line": 39,
          "note": "nonzero exit when immutable tag already exists"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/docs/benchmark/DATASET_POLICY.md",
          "line": 33,
          "note": "immutability enforcement documented"
        }
      ],
      "impact": "Existing benchmark dataset tags and release assets cannot be overwritten in place.",
      "recommendation": "Continue semantic version bumps for any dataset content change.",
      "owner": "CLI Benchmark + Release",
      "verification": [
        "node scripts/bench/assert-dataset-tag-absent.mjs --repo f-campana/imageforge --dataset-version 1.0.0 (expects exit 1)",
        "node scripts/bench/assert-dataset-tag-absent.mjs --repo f-campana/imageforge --dataset-version 9.9.9 (expects exit 0)"
      ]
    },
    {
      "id": "IF-CLI-BENCH-013",
      "repo": "imageforge",
      "domain": "Benchmark Gating",
      "severity": "Medium",
      "deltaStatus": "New",
      "finding": "Benchmark regression signaling remains advisory-only.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/docs/benchmark/STANDARD.md",
          "line": 11,
          "note": "advisory policy"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.github/workflows/benchmark-ci.yml",
          "line": 207,
          "note": "warnings only"
        }
      ],
      "impact": "Regressions can merge without explicit override decision.",
      "recommendation": "Introduce optional strict mode for release/hardening contexts.",
      "owner": "CLI Benchmark",
      "verification": ["Workflow strict-mode simulation with induced regression"]
    },
    {
      "id": "IF-CLI-SEC-014",
      "repo": "imageforge",
      "domain": "Secret Handling",
      "severity": "High",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 1: benchmark sync now avoids tokenized git URLs and redacts failure output.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/sync-site-benchmark.mjs",
          "line": 282,
          "note": "remote URL no longer embeds token"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/sync-site-benchmark.mjs",
          "line": 78,
          "note": "askpass credential flow for git auth"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/sync-site-benchmark.mjs",
          "line": 25,
          "note": "central secret redaction for command failures"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/bench/sync-site-benchmark.mjs",
          "line": 398,
          "note": "temporary credential helper cleanup in finally"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/tests/benchmark-tools.test.ts",
          "line": 697,
          "note": "failure-path test asserts token is not leaked"
        }
      ],
      "impact": "Token leakage risk in git command arguments and failure logs is significantly reduced.",
      "recommendation": "Retain redaction coverage tests for future sync-script changes.",
      "owner": "CLI Security",
      "verification": [
        "pnpm exec vitest run tests/benchmark-tools.test.ts --reporter verbose",
        "sync-site benchmark redaction test passes"
      ]
    },
    {
      "id": "IF-CLI-MAINT-015",
      "repo": "imageforge",
      "domain": "Code Hygiene",
      "severity": "Low",
      "deltaStatus": "Unchanged",
      "finding": "Shared helper/constants remain duplicated across modules.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/config.ts",
          "line": 46,
          "note": "isRecord duplicate"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/cli.ts",
          "line": 47,
          "note": "isRecord duplicate"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 144,
          "note": "LIMIT_INPUT_PIXELS duplicate"
        }
      ],
      "impact": "Behavioral drift risk on future edits.",
      "recommendation": "Centralize common guards/constants.",
      "owner": "CLI Core",
      "verification": ["pnpm run typecheck && pnpm test after extraction"]
    },
    {
      "id": "IF-CLI-MAINT-016",
      "repo": "imageforge",
      "domain": "Release Automation",
      "severity": "Low",
      "deltaStatus": "Resolved",
      "finding": "Release Please manifest tracking is now explicit and wired.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.release-please-manifest.json",
          "line": 1,
          "note": "manifest tracked"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.github/workflows/release-please.yml",
          "line": 21,
          "note": "manifest-file configured"
        }
      ],
      "impact": "Release automation state clarity improved.",
      "recommendation": "Keep release metadata contract under CI validation.",
      "owner": "CLI Release",
      "verification": ["Release Please workflow run/dry-run"]
    },
    {
      "id": "IF-SITE-PROD-017",
      "repo": "imageforge-site",
      "domain": "Product/Claims",
      "severity": "Low",
      "deltaStatus": "New",
      "finding": "Site now ships a benchmark evidence route backed by synced snapshot JSON.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/app/benchmarks/latest/page.tsx",
          "line": 19,
          "note": "benchmark page renders latest + history"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/data/benchmarks/latest.json",
          "line": 16,
          "note": "source sha references audited CLI main"
        }
      ],
      "impact": "Claim traceability and credibility improved.",
      "recommendation": "Maintain sync cadence and stale snapshot alerting.",
      "owner": "Site Product + Benchmark",
      "verification": ["pnpm run benchmark:test", "Render /benchmarks/latest"]
    },
    {
      "id": "IF-SITE-PROD-018",
      "repo": "imageforge-site",
      "domain": "Analytics",
      "severity": "Low",
      "deltaStatus": "Resolved",
      "finding": "Analytics and Speed Insights are now integrated with browser opt-out controls.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/app/layout.tsx",
          "line": 81,
          "note": "analytics components mounted"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/components/analytics/VercelAnalytics.tsx",
          "line": 23,
          "note": "beforeSend suppression hook"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/lib/analytics/browser-opt-out.ts",
          "line": 1,
          "note": "query/localStorage opt-out implementation"
        }
      ],
      "impact": "Prior analytics gap is closed.",
      "recommendation": "Add event-level validation when custom events are enabled.",
      "owner": "Site Growth",
      "verification": ["Manual ?analytics=off/on validation in browser"]
    },
    {
      "id": "IF-SITE-MAINT-019",
      "repo": "imageforge-site",
      "domain": "Dependency Surface",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: googleapis moved from production dependencies to devDependencies for script-only usage.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/package.json",
          "line": 47,
          "note": "devDependencies block now contains googleapis"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/package.json",
          "line": 59,
          "note": "googleapis listed under devDependencies"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/seo/gsc.mjs",
          "line": 1,
          "note": "usage remains script-scoped"
        }
      ],
      "impact": "Production dependency surface is reduced while SEO tooling remains functional.",
      "recommendation": "Keep script-only packages in devDependencies and validate with CI install/build/SEO runs.",
      "owner": "Site Platform",
      "verification": ["pnpm run check:ci", "pnpm run seo:test"]
    },
    {
      "id": "IF-SITE-PROD-020",
      "repo": "imageforge-site",
      "domain": "Claim Freshness",
      "severity": "Medium",
      "deltaStatus": "Unchanged",
      "finding": "Pricing as-of constants are still hardcoded to February 11, 2026.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/components/landing/constants.ts",
          "line": 70,
          "note": "EXAMPLE_TIMESTAMP and PRICING_AS_OF are static"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/components/landing/ComparisonAndCost.tsx",
          "line": 52,
          "note": "renders static as-of text"
        }
      ],
      "impact": "Risk of stale external pricing claims over time.",
      "recommendation": "Automate stale-claim detection with a blocking freshness threshold.",
      "owner": "Site Product + Growth",
      "verification": ["Scheduled freshness check in CI/governance workflow"]
    },
    {
      "id": "IF-SITE-TEST-021",
      "repo": "imageforge-site",
      "domain": "UI Validation",
      "severity": "High",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 3: site now has Vitest component/hook tests, Playwright E2E smoke tests, and visual regression snapshots wired into an advisory CI workflow.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/package.json",
          "line": 14,
          "note": "adds test:unit/test:e2e/test:visual scripts"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/unit/components/landing/InstallCommands.test.tsx",
          "line": 11,
          "note": "keyboard and ARIA tab behavior coverage"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/unit/components/landing/CopyButton.test.tsx",
          "line": 8,
          "note": "clipboard success/failure path coverage"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/e2e/landing-and-benchmark.smoke.spec.ts",
          "line": 3,
          "note": "route-level smoke checks for / and /benchmarks/latest"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/quality-gates.yml",
          "line": 42,
          "note": "advisory CI execution for unit/e2e/visual/lhci"
        }
      ],
      "impact": "Primary UI interaction regressions now have automated detection before merge.",
      "recommendation": "Keep these suites green and tune flake before promoting any subset to blocking.",
      "owner": "Site Frontend QA",
      "verification": [
        "pnpm test:unit",
        "pnpm test:e2e",
        "pnpm test:visual",
        "GitHub Actions check run: quality-gates-advisory (PR #28)"
      ]
    },
    {
      "id": "IF-SITE-UX-022",
      "repo": "imageforge-site",
      "domain": "UX/A11y/Motion",
      "severity": "Low",
      "deltaStatus": "New",
      "finding": "Animation safety gate now runs canonical + fixture checks and passed in this audit.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/animation/run-check.sh",
          "line": 79,
          "note": "canonical + fixture completion path"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/animation/assert-core-safety.mts",
          "line": 86,
          "note": "pass output path"
        },
        {
          "path": "/tmp/imageforge-audit/site-main-2xX1Hb/.tmp/animation/matrix-fixture.json",
          "line": 2,
          "note": "fresh matrix generated during audit"
        }
      ],
      "impact": "Core safety controls are now continuously verifiable.",
      "recommendation": "Keep strict gates for safety and advisory scoring for style density.",
      "owner": "Site UX",
      "verification": ["pnpm run animation:check"]
    },
    {
      "id": "IF-SITE-SEO-023",
      "repo": "imageforge-site",
      "domain": "SEO Tooling Quality",
      "severity": "Medium",
      "deltaStatus": "New",
      "finding": "H1 audit logic overcounts by scanning source files globally, yielding persistent high-noise warnings.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/seo/technical.mjs",
          "line": 362,
          "note": "aggregates all app/components source files"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/seo/technical.mjs",
          "line": 387,
          "note": "expects global count == 1"
        },
        {
          "path": "/tmp/imageforge-audit/site-main-2xX1Hb/.tmp/seo/report.json",
          "line": 94,
          "note": "high warning triggered: Expected one H1, found 3"
        }
      ],
      "impact": "Signal-to-noise degradation in SEO checks can mask true issues.",
      "recommendation": "Evaluate H1 per route render output, not source-text global count.",
      "owner": "Site SEO",
      "verification": ["pnpm run seo:check after rule update"]
    },
    {
      "id": "IF-SITE-SEO-024",
      "repo": "imageforge-site",
      "domain": "SEO Signal Noise",
      "severity": "Low",
      "deltaStatus": "Changed",
      "finding": "CI-parity checks use example.com and generate predictable off-page metadata warnings.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/package.json",
          "line": 14,
          "note": "check:ci sets NEXT_PUBLIC_SITE_URL=https://example.com"
        },
        {
          "path": "/tmp/imageforge-audit/site-main-2xX1Hb/.tmp/seo/report.json",
          "line": 182,
          "note": "offpage.public_metadata_presence warning"
        }
      ],
      "impact": "Advisory output contains expected env-noise unrelated to production metadata.",
      "recommendation": "Skip/adjust public-metadata check when placeholder domain is in use.",
      "owner": "Site SEO",
      "verification": ["pnpm run check:ci with placeholder-aware SEO mode"]
    },
    {
      "id": "IF-SITE-SEC-025",
      "repo": "imageforge-site",
      "domain": "Web Security Hardening",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: baseline security headers are configured in Next.js and validated by E2E assertions.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/next.config.ts",
          "line": 3,
          "note": "securityHeaders policy defined"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/next.config.ts",
          "line": 37,
          "note": "headers() applies policy to all routes"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/e2e/landing-and-benchmark.smoke.spec.ts",
          "line": 64,
          "note": "E2E checks required headers on landing and benchmark routes"
        }
      ],
      "impact": "Defense-in-depth browser protections are now emitted consistently on key routes.",
      "recommendation": "Keep header policy in Next config and maintain E2E assertions for / and /benchmarks/latest.",
      "owner": "Site Security",
      "verification": ["pnpm run test:e2e"]
    },
    {
      "id": "IF-SITE-MAINT-026",
      "repo": "imageforge-site",
      "domain": "Content IA",
      "severity": "Low",
      "deltaStatus": "Unchanged",
      "finding": "No first-party docs/blog/contact routes; docs/changelog are external links.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/app/page.tsx",
          "line": 35,
          "note": "single-page composition"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/components/landing/FinalCtaFooter.tsx",
          "line": 25,
          "note": "docs/changelog link to GitHub"
        }
      ],
      "impact": "Limits long-tail discoverability and direct feedback capture.",
      "recommendation": "Add lightweight first-party docs and feedback entrypoint.",
      "owner": "Site Product + Growth",
      "verification": ["Route smoke tests for new docs/feedback paths"]
    },
    {
      "id": "IF-SITE-SEC-027",
      "repo": "imageforge-site",
      "domain": "CI Supply Chain",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: site workflows are SHA-pinned and action-pinning policy is enforced in CI.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/ci.yml",
          "line": 13,
          "note": "workflow-action-pinning required job"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/ci.yml",
          "line": 150,
          "note": "security-audit job also uses pinned actions"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/security/check-workflow-action-pinning.mjs",
          "line": 1,
          "note": "policy script validates pinned refs"
        }
      ],
      "impact": "Floating-action drift is blocked automatically instead of relying on manual review consistency.",
      "recommendation": "Keep workflow-action-pinning required and update SHAs through action-update PRs.",
      "owner": "Site Platform + Security",
      "verification": [
        "node scripts/security/check-workflow-action-pinning.mjs",
        "GitHub Actions job: workflow-action-pinning"
      ]
    },
    {
      "id": "IF-X-VAL-028",
      "repo": "imageforge",
      "domain": "Quality Gate Health",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 4: formatting drift on audit artifacts was normalized and check is green again on main.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/docs/audits/2026-02-19-main-cross-repo-findings.md",
          "line": 1,
          "note": "formatted audit artifact committed"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/docs/audits/2026-02-19-main-cross-repo-findings.json",
          "line": 1,
          "note": "formatted audit artifact committed"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/package.json",
          "line": 75,
          "note": "check gate includes format:check and now passes"
        }
      ],
      "impact": "Local and CI quality-gate parity is restored for release checks.",
      "recommendation": "Keep audit artifacts formatting-stable and preserve check gate strictness.",
      "owner": "CLI Maintainers",
      "verification": ["pnpm run check"]
    },
    {
      "id": "IF-X-VAL-029",
      "repo": "imageforge-site",
      "domain": "Security Validation Reliability",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: prod dependency auditing retries transient failures and falls back to OSV with fail-closed behavior.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/security/audit-prod-deps.mjs",
          "line": 5,
          "note": "retry configuration for primary scanner"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/security/audit-prod-deps.mjs",
          "line": 214,
          "note": "retry loop + fallback orchestration"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/ci.yml",
          "line": 150,
          "note": "dedicated security-audit job executes reliable wrapper"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/package.json",
          "line": 27,
          "note": "audit:prod:reliable script entrypoint"
        }
      ],
      "impact": "Security audit gate is deterministic even when npm audit has transient outages.",
      "recommendation": "Retain retry/fallback fail-closed logic and periodically exercise fallback path.",
      "owner": "Site Platform",
      "verification": ["pnpm run audit:prod:reliable", "GitHub Actions job: security-audit"]
    },
    {
      "id": "IF-X-SEC-030",
      "repo": "imageforge",
      "domain": "Cross-Repo Supply Chain",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 5: both repos enforce a unified SHA-pinning workflow policy with CI checks.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.github/workflows/ci.yml",
          "line": 13,
          "note": "workflow-action-pinning required job in CLI repo"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/.github/workflows/benchmark-ci.yml",
          "line": 257,
          "note": "benchmark publish job uses pinned setup actions"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/scripts/security/check-workflow-action-pinning.mjs",
          "line": 1,
          "note": "CLI repo policy checker"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/ci.yml",
          "line": 13,
          "note": "workflow-action-pinning required job in site repo"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/scripts/security/check-workflow-action-pinning.mjs",
          "line": 1,
          "note": "site repo policy checker"
        }
      ],
      "impact": "Cross-repo workflow supply-chain policy is now consistent and automatically enforced.",
      "recommendation": "Keep both policy checks required and update pinned SHAs through automated action dependency PRs.",
      "owner": "Platform/SecOps",
      "verification": [
        "node /Users/fabiencampana/Documents/ImageForge/scripts/security/check-workflow-action-pinning.mjs",
        "node /Users/fabiencampana/Documents/imageforge-site/scripts/security/check-workflow-action-pinning.mjs"
      ]
    },
    {
      "id": "IF-X-DX-031",
      "repo": "imageforge",
      "domain": "CLI UX",
      "severity": "Low",
      "deltaStatus": "Resolved",
      "finding": "Check mode now provides per-file needs-processing output in addition to rerun command.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 893,
          "note": "per-file needs-processing log line"
        },
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/src/runner.ts",
          "line": 1061,
          "note": "aggregate rerun command still present"
        }
      ],
      "impact": "Improved CI/debug feedback compared with prior audit baseline.",
      "recommendation": "Maintain this behavior and preserve parity in JSON mode metadata.",
      "owner": "CLI Product",
      "verification": ["imageforge <dir> --check output inspection"]
    },
    {
      "id": "IF-X-TEST-032",
      "repo": "imageforge",
      "domain": "Coverage Strategy",
      "severity": "Medium",
      "deltaStatus": "Changed",
      "finding": "Coverage strategy improved materially on site UI (unit/component + E2E + visual + LHCI), but cross-repo coverage reporting and mutation/fault-injection governance remain incomplete.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/ImageForge/vitest.config.ts",
          "line": 3,
          "note": "no coverage thresholds/reporting configured for CLI tests"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/package.json",
          "line": 14,
          "note": "new unit/e2e/visual/lhci scripts and quality gate bundle"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/unit/components/benchmark/BenchmarkPageContent.test.tsx",
          "line": 10,
          "note": "site component test layer now exists"
        }
      ],
      "impact": "Regression detection breadth improved, but effectiveness trends are still hard to quantify without coverage and fault-injection signals.",
      "recommendation": "Add coverage artifacts/threshold trends for both repos, then phase in mutation or targeted fault-injection for critical paths.",
      "owner": "CLI QA + Site QA",
      "verification": [
        "CI coverage artifact publication in both repos",
        "Periodic mutation/fault-injection run reports for critical modules"
      ]
    },
    {
      "id": "IF-SITE-UX-033",
      "repo": "imageforge-site",
      "domain": "Motion Quality",
      "severity": "Medium",
      "deltaStatus": "Resolved",
      "finding": "Resolved in Phase 3: motion-quality regression detection now includes Lighthouse CI lab checks and Playwright visual diffs for critical landing/benchmark states.",
      "evidence": [
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/lighthouserc.json",
          "line": 4,
          "note": "LHCI collects / and /benchmarks/latest with advisory assertions"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/visual/landing.visual.spec.ts",
          "line": 15,
          "note": "committed screenshot baseline for landing hero/install area"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/tests/visual/benchmark.visual.spec.ts",
          "line": 15,
          "note": "committed screenshot baseline for benchmark hero/summary area"
        },
        {
          "path": "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/quality-gates.yml",
          "line": 69,
          "note": "advisory CI execution of LHCI and visual suites with artifact retention"
        }
      ],
      "impact": "Visual/motion drift now has automated lab and screenshot signals beyond structural safety checks.",
      "recommendation": "Keep advisory posture while calibrating thresholds and false-positive rates before any blocking transition.",
      "owner": "Site UX + Perf",
      "verification": [
        "pnpm lhci",
        "pnpm test:visual",
        "GitHub Actions check run: quality-gates-advisory (PR #28)"
      ]
    }
  ],
  "decisionAddendum": {
    "title": "Animation Quality Tooling Decisions (Discussion Outcome)",
    "asOfDate": "2026-02-19",
    "implementationState": "phase-3-implemented-advisory",
    "lockedDecisions": [
      {
        "item": "Adopt Lighthouse CI (@lhci/cli) for lab LCP/INP/CLS trend checks",
        "initialGateMode": "non-blocking",
        "rationale": "Complements field telemetry with reproducible lab regression signal"
      },
      {
        "item": "Adopt Playwright visual diff snapshots for targeted critical routes/states",
        "initialGateMode": "non-blocking",
        "rationale": "Adds visual regression signal with controlled scope to reduce churn"
      },
      {
        "item": "Add Vitest baseline for unit/integration tests",
        "initialGateMode": "non-blocking-introduction",
        "rationale": "Improve low-latency test coverage on practical logic surfaces"
      },
      {
        "item": "Expand Playwright E2E coverage",
        "initialGateMode": "non-blocking-introduction",
        "rationale": "Increase route-level UX and interaction confidence on / and /benchmarks/latest"
      },
      {
        "item": "Defer Storybook and do not use vdiff in CI for now",
        "initialGateMode": "deferred",
        "rationale": "Prioritize high-signal quality gates over catalog/workflow overhead"
      }
    ],
    "baselineContext": [
      {
        "item": "Vercel Analytics and Speed Insights already mounted",
        "evidence": [
          "/Users/fabiencampana/Documents/imageforge-site/app/layout.tsx:81",
          "/Users/fabiencampana/Documents/imageforge-site/components/analytics/VercelAnalytics.tsx:23",
          "/Users/fabiencampana/Documents/imageforge-site/components/analytics/VercelSpeedInsights.tsx:9"
        ]
      },
      {
        "item": "Animation safety automation already present (collector/assertions/runner/workflow)",
        "evidence": [
          "/Users/fabiencampana/Documents/imageforge-site/scripts/animation/collect-matrix.mts:73",
          "/Users/fabiencampana/Documents/imageforge-site/scripts/animation/assert-core-safety.mts:60",
          "/Users/fabiencampana/Documents/imageforge-site/scripts/animation/run-check.sh:43",
          "/Users/fabiencampana/Documents/imageforge-site/.github/workflows/animation-safety.yml:1"
        ]
      }
    ]
  }
}
